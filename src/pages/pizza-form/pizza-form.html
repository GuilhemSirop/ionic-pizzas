<!--
  Generated template for the PizzaFormPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{title_form}} une Pizza</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <div *ngIf="isLoading;else form_content" text-center>
    <img src="../../assets/imgs/gif-load.gif" />
  </div>

  <ng-template #form_content>
    <form *ngIf="form" [formGroup]="form" (ngSubmit)="onSubmit(); ">

      <p class="text-center ">
        <img *ngIf="pizza && pizza.img" class="img-responsive center-block" src="data:image/png;base64,{{pizza.img}}">
        <label for="filePicker">Modifier l'image:</label><br>
        <input class="center-block" type="file" id="filePicker" (change)="handleFileSelect($event)">


      </p>
      <p>
        <ion-item>
          <ion-label floating>Nom</ion-label>
          <ion-input type="text" formControlName="name"></ion-input>
        </ion-item>

      </p>
      <p>
        <ion-item>
          <ion-label floating>Description</ion-label>
          <ion-textarea formControlName="description"></ion-textarea>
        </ion-item>

      </p>
      <p>
        <ion-item>
          <ion-label floating>Prix (€)</ion-label>
          <ion-input type="number" formControlName="price"></ion-input>
        </ion-item>
      </p>
      <p>
        <label>Ingrédients</label>
        <span *ngFor="let ingredient of listIngredient">
        <button type="button" (click)="toggleIngredient(ingredient._id)"
                class="btn btn-info"
                [ngClass]="{'active': selectedIngredients.indexOf(ingredient._id) !== -1}"
                role="alert">
          <i class="fa fa-hand-o-up"></i> {{ingredient.name}}
        </button>&nbsp;
      </span>
      </p>
      <p>
        <button type="submit" [disabled]="!form.valid" ion-button>Enregistrer</button>
      </p>
    </form>
  </ng-template>

</ion-content>
